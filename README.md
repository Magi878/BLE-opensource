


          
æˆ‘éœ€è¦å…ˆäº†è§£è¿™ä¸ªå¼€æºé¡¹ç›®çš„æ•´ä½“æ–‡ä»¶ç»“æ„ï¼Œç„¶åä¸ºå…¶ç¼–å†™ä¸€ä¸ªæ¸…æ™°çš„READMEæ–‡æ¡£ã€‚
        
            
toolName: view_folder
            
status: success
          
/data/ganshushen/Projects/BLE_CODE_OPEN
          
ç°åœ¨æˆ‘éœ€è¦æŸ¥çœ‹æ›´å¤šçš„ç›®å½•ç»“æ„ç»†èŠ‚ï¼Œç‰¹åˆ«æ˜¯Faisså’Œmodelç›®å½•çš„å†…å®¹ã€‚
        
            
toolName: view_folder
            
status: success
          
/data/ganshushen/Projects/BLE_CODE_OPEN/Faiss
          
æŸ¥çœ‹modelç›®å½•çš„å†…å®¹ã€‚
        
            
toolName: view_folder
            
status: success
          
/data/ganshushen/Projects/BLE_CODE_OPEN/model
          
æŸ¥çœ‹Pipeline/dataç›®å½•ä¸‹çš„å…·ä½“å†…å®¹ã€‚
        
            
toolName: view_folder
            
status: success
          
/data/ganshushen/Projects/BLE_CODE_OPEN/Pipeline/data
          
æŸ¥çœ‹Pipeline/serverç›®å½•ä¸‹çš„logsæ–‡ä»¶å¤¹å†…å®¹ã€‚
        
            
toolName: view_folder
            
status: success
          
/data/ganshushen/Projects/BLE_CODE_OPEN/Pipeline/server
          
ç°åœ¨æˆ‘éœ€è¦æŸ¥çœ‹ä¸€äº›å…³é”®æ–‡ä»¶çš„å†…å®¹æ¥äº†è§£é¡¹ç›®çš„åŠŸèƒ½å’Œæ¶æ„ï¼Œå…ˆæŸ¥çœ‹ä¸»è¦çš„å…¥å£æ–‡ä»¶ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: /data/ganshushen/Projects/BLE_CODE_OPEN/Pipeline/main.py
          
æŸ¥çœ‹é¡¹ç›®çš„å¤©çŒ«æœåŠ¡å™¨æ–‡ä»¶ï¼Œäº†è§£é¡¹ç›®çš„ä¸»è¦åŠŸèƒ½ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: /data/ganshushen/Projects/BLE_CODE_OPEN/Pipeline/_tianmao_server.py
          
æŸ¥çœ‹çŸ¥è¯†å›¾è°±æ£€ç´¢å™¨æ–‡ä»¶ï¼Œäº†è§£é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: /data/ganshushen/Projects/BLE_CODE_OPEN/Pipeline/kg_retriever.py
          
æŸ¥çœ‹å¿«é€Ÿå¯åŠ¨è„šæœ¬ï¼Œäº†è§£é¡¹ç›®çš„æœåŠ¡æ¶æ„ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: /data/ganshushen/Projects/BLE_CODE_OPEN/Pipeline/server/quick_start_all_sever.sh
          
æŸ¥çœ‹å¤šè·¯æ£€ç´¢å™¨æ–‡ä»¶ï¼Œäº†è§£é¡¹ç›®çš„æ£€ç´¢æœºåˆ¶ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: /data/ganshushen/Projects/BLE_CODE_OPEN/Pipeline/multi_path_retriever.py
          
# BLE_CODE_OPEN

ä¸€ä¸ªåŸºäºå¤§è¯­è¨€æ¨¡å‹å’ŒçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½èœå“æ¨èç³»ç»Ÿï¼Œä¸“ä¸ºè€å¹´äººç¾¤ä½“è®¾è®¡ï¼Œæ”¯æŒè¯­éŸ³äº¤äº’å’Œä¸ªæ€§åŒ–å¥åº·çº¦æŸã€‚

## ğŸ¯ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªæ™ºèƒ½èœå“æ¨èç³»ç»Ÿï¼Œç»“åˆäº†è‡ªåŠ¨è¯­éŸ³è¯†åˆ«(ASR)ã€å¤§è¯­è¨€æ¨¡å‹(LLM)ã€çŸ¥è¯†å›¾è°±(KG)å’Œå‘é‡æ£€ç´¢æŠ€æœ¯ï¼Œä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„èœå“æ¨èæœåŠ¡ã€‚ç³»ç»Ÿç‰¹åˆ«é’ˆå¯¹è€å¹´äººç¾¤ä½“çš„å¥åº·éœ€æ±‚å’Œé¥®é£Ÿåå¥½è¿›è¡Œäº†ä¼˜åŒ–ã€‚

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **è¯­éŸ³è¯†åˆ«**: Paraformer ASRæ¨¡å‹
- **å‘é‡æ£€ç´¢**: FAISS + BGEåµŒå…¥æ¨¡å‹
- **çŸ¥è¯†å›¾è°±**: Neo4jæ•°æ®åº“
- **é‡æ’åº**: BGEé‡æ’å™¨ + LLMé‡æ’å™¨
- **WebæœåŠ¡**: Flask + SocketIO
- **å¤šè·¯å¬å›**: BM25 + å‘é‡æ£€ç´¢ + çŸ¥è¯†å›¾è°±æ£€ç´¢

## ğŸ“ æ–‡ä»¶ç»“æ„

```
BLE_CODE_OPEN/
â”œâ”€â”€ .gitignore                    # Gitå¿½ç•¥æ–‡ä»¶é…ç½®
â”œâ”€â”€ Faiss/                        # FAISSå‘é‡æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ build_faiss_database.py   # æ„å»ºFAISSæ•°æ®åº“è„šæœ¬
â”‚   â””â”€â”€ build_faiss_database_csv.py # ä»CSVæ„å»ºFAISSæ•°æ®åº“
â”œâ”€â”€ model/                        # æ¨¡å‹æ–‡ä»¶ç›®å½•(éœ€è¦ä¸‹è½½ç›¸åº”æ¨¡å‹)
â””â”€â”€ Pipeline/                     # ä¸»è¦ä¸šåŠ¡é€»è¾‘
    â”œâ”€â”€ main.py                   # ä¸»è¦æ¨èæµç¨‹å…¥å£
    â”œâ”€â”€ _tianmao_server.py        # å¤©çŒ«ç²¾çµæœåŠ¡å™¨(Webç•Œé¢)
    â”œâ”€â”€ ASR_Paraformer.py         # è¯­éŸ³è¯†åˆ«æ¨¡å—
    â”œâ”€â”€ kg_retriever.py           # çŸ¥è¯†å›¾è°±æ£€ç´¢å™¨
    â”œâ”€â”€ multi_path_retriever.py   # å¤šè·¯å¬å›æ£€ç´¢å™¨
    â”œâ”€â”€ llmrec_engine.py          # LLMæ¨èå¼•æ“
    â”œâ”€â”€ llmrec_prompt_engine.py   # LLMæç¤ºè¯æ„å»ºå™¨
    â”œâ”€â”€ query_resolver.py         # æŸ¥è¯¢è§£æå’Œé‡å†™
    â”œâ”€â”€ health_level_agent.py     # å¥åº·çº¦æŸä»£ç†
    â”œâ”€â”€ cypher_templates.py       # CypheræŸ¥è¯¢æ¨¡æ¿
    â”œâ”€â”€ prompt.py                 # æç¤ºè¯æ¨¡æ¿
    â”œâ”€â”€ utils.py                  # å·¥å…·å‡½æ•°
    â”œâ”€â”€ data/                     # æ•°æ®æ–‡ä»¶
    â”‚   â”œâ”€â”€ DishData/            # èœå“æ•°æ®
    â”‚   â”‚   â””â”€â”€ dim_ai_exam_food_category_filter_out.txt
    â”‚   â”œâ”€â”€ UserData/            # ç”¨æˆ·æ•°æ®
    â”‚   â”‚   â””â”€â”€ 1000_user_processed_with_health_constraints.jsonl
    â”‚   â””â”€â”€ WavData/             # éŸ³é¢‘æ–‡ä»¶
    â”‚       â””â”€â”€ *.wav            # è¯­éŸ³æ–‡ä»¶
    â””â”€â”€ server/                   # å¾®æœåŠ¡æ¨¡å—
        â”œâ”€â”€ quick_start_all_sever.sh      # ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡è„šæœ¬
        â”œâ”€â”€ asr_server.py                 # ASRæœåŠ¡ (ç«¯å£8003)
        â”œâ”€â”€ embedding_service.py          # åµŒå…¥æœåŠ¡ (ç«¯å£8001)
        â”œâ”€â”€ reranker_service.py           # é‡æ’åºæœåŠ¡ (ç«¯å£8000)
        â”œâ”€â”€ rewrite_faiss_server.py       # æŸ¥è¯¢é‡å†™FAISSæœåŠ¡ (ç«¯å£5001)
        â”œâ”€â”€ products_faiss_server.py      # äº§å“FAISSæœåŠ¡ (ç«¯å£5006)
        â”œâ”€â”€ KG_filter_server.py           # çŸ¥è¯†å›¾è°±è¿‡æ»¤æœåŠ¡ (ç«¯å£6666)
        â”œâ”€â”€ KG_filter_dataset_build.py    # KGè¿‡æ»¤æ•°æ®é›†æ„å»º
        â”œâ”€â”€ qwen3_reranker_server.py      # Qwen3é‡æ’åºæœåŠ¡
        â”œâ”€â”€ inference.py                  # æ¨ç†æœåŠ¡
        â””â”€â”€ temp_wavs/                    # ä¸´æ—¶éŸ³é¢‘æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# ç¡®ä¿Neo4jæ•°æ®åº“è¿è¡Œ
# ç¡®ä¿ç›¸å…³æ¨¡å‹æ–‡ä»¶å·²ä¸‹è½½åˆ°model/ç›®å½•
```

### 2. å¯åŠ¨æœåŠ¡

```bash
# ä¸€é”®å¯åŠ¨æ‰€æœ‰å¾®æœåŠ¡
cd Pipeline/server
bash quick_start_all_sever.sh
```

### 3. å¯åŠ¨Webç•Œé¢

```bash
# å¯åŠ¨å¤©çŒ«ç²¾çµæœåŠ¡å™¨
cd Pipeline
python _tianmao_server.py

# è®¿é—® http://localhost:9999 è¿›è¡Œäº¤äº’
```

## ğŸ”§ æœåŠ¡ç«¯å£è¯´æ˜

| æœåŠ¡åç§° | ç«¯å£ | åŠŸèƒ½æè¿° |
|---------|------|----------|
| ASRæœåŠ¡ | 8003 | è¯­éŸ³è¯†åˆ« |
| EmbeddingæœåŠ¡ | 8001 | æ–‡æœ¬åµŒå…¥ |
| RerankeræœåŠ¡ | 8000 | BGEé‡æ’åº |
| Rewrite FAISSæœåŠ¡ | 5001 | æŸ¥è¯¢é‡å†™æ£€ç´¢ |
| Products FAISSæœåŠ¡ | 5006 | äº§å“å‘é‡æ£€ç´¢ |
| KG FilteræœåŠ¡ | 6666 | çŸ¥è¯†å›¾è°±è¿‡æ»¤ |
| å¤©çŒ«ç²¾çµæœåŠ¡ | 9999 | Webäº¤äº’ç•Œé¢ |

## ğŸ’¡ æ ¸å¿ƒåŠŸèƒ½

### 1. å¤šè·¯å¬å›æœºåˆ¶
- **å‘é‡æ£€ç´¢**: åŸºäºFAISSçš„è¯­ä¹‰ç›¸ä¼¼åº¦æ£€ç´¢
- **BM25æ£€ç´¢**: åŸºäºå…³é”®è¯çš„ä¼ ç»Ÿæ£€ç´¢
- **çŸ¥è¯†å›¾è°±æ£€ç´¢**: åŸºäºç”¨æˆ·åå¥½å’Œå¥åº·çº¦æŸçš„ç»“æ„åŒ–æ£€ç´¢
- **RRFèåˆ**: å¤šè·¯å¬å›ç»“æœçš„èåˆæ’åº

### 2. æ™ºèƒ½é‡æ’åº
- **BGEé‡æ’åº**: åŸºäºBGEæ¨¡å‹çš„è¯­ä¹‰é‡æ’åº
- **LLMé‡æ’åº**: åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½é‡æ’åº
- **å¹¶è¡Œå¤„ç†**: ä¸¤ç§é‡æ’åºæ–¹å¼å¹¶è¡Œæ‰§è¡Œï¼Œæé«˜æ•ˆç‡

### 3. å¥åº·çº¦æŸ
- **å¥åº·çŠ¶å†µè¯†åˆ«**: è‡ªåŠ¨è¯†åˆ«ç”¨æˆ·å¥åº·çŠ¶å†µ
- **é£Ÿå“è¿‡æ»¤**: è¿‡æ»¤ä¸é€‚åˆç”¨æˆ·å¥åº·çŠ¶å†µçš„é£Ÿå“
- **ä¸ªæ€§åŒ–æ¨è**: åŸºäºç”¨æˆ·åå¥½å’Œå¥åº·çº¦æŸçš„ä¸ªæ€§åŒ–æ¨è

### 4. è¯­éŸ³äº¤äº’
- **è¯­éŸ³è¯†åˆ«**: æ”¯æŒè¯­éŸ³è¾“å…¥
- **æ„å›¾ç†è§£**: æ™ºèƒ½ç†è§£ç”¨æˆ·æ„å›¾
- **æŸ¥è¯¢é‡å†™**: ä¼˜åŒ–ç”¨æˆ·æŸ¥è¯¢è¡¨è¾¾

## ğŸ” ä½¿ç”¨ç¤ºä¾‹

1. **Webç•Œé¢äº¤äº’**: è®¿é—® http://localhost:9999ï¼Œè®¾ç½®ç”¨æˆ·ä¿¡æ¯ï¼Œè¿›è¡Œè¯­éŸ³æˆ–æ–‡æœ¬äº¤äº’
2. **APIè°ƒç”¨**: ç›´æ¥è°ƒç”¨å„ä¸ªå¾®æœåŠ¡çš„APIæ¥å£
3. **æ‰¹é‡å¤„ç†**: ä½¿ç”¨main.pyè¿›è¡Œæ‰¹é‡æ¨èå¤„ç†

## ğŸ“Š æ•°æ®è¯´æ˜

- **ç”¨æˆ·æ•°æ®**: åŒ…å«ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€å¥åº·çŠ¶å†µã€é¥®é£Ÿåå¥½ç­‰
- **èœå“æ•°æ®**: åŒ…å«èœå“åç§°ã€åˆ†ç±»ã€è¥å…»ä¿¡æ¯ç­‰
- **çŸ¥è¯†å›¾è°±**: å­˜å‚¨èœå“ã€é£Ÿæã€è¥å…»ã€å¥åº·çŠ¶å†µä¹‹é—´çš„å…³ç³»

## ğŸ› ï¸ å¼€å‘è¯´æ˜

### æ·»åŠ æ–°çš„æ£€ç´¢è·¯å¾„
1. åœ¨ `multi_path_retriever.py` ä¸­æ·»åŠ æ–°çš„æ£€ç´¢å‡½æ•°
2. åœ¨ `Multi_Path_Search` å‡½æ•°ä¸­é›†æˆæ–°çš„æ£€ç´¢è·¯å¾„
3. æ›´æ–°RRFèåˆé€»è¾‘

### æ·»åŠ æ–°çš„é‡æ’åºå™¨
1. åœ¨ `llmrec_engine.py` ä¸­æ·»åŠ æ–°çš„é‡æ’åºå‡½æ•°
2. åœ¨ `parallel_rerank` å‡½æ•°ä¸­é›†æˆæ–°çš„é‡æ’åºå™¨
3. æ›´æ–°ç»“æœèåˆé€»è¾‘

## ğŸ“ æ³¨æ„äº‹é¡¹

1. ç¡®ä¿Neo4jæ•°æ®åº“æ­£å¸¸è¿è¡Œå¹¶åŒ…å«ç›¸å…³æ•°æ®
2. æ¨¡å‹æ–‡ä»¶éœ€è¦å•ç‹¬ä¸‹è½½å¹¶æ”¾ç½®åœ¨model/ç›®å½•ä¸‹
3. FAISSæ•°æ®åº“éœ€è¦é¢„å…ˆæ„å»º
4. å„ä¸ªæœåŠ¡ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå»ºè®®æŒ‰ç…§å¯åŠ¨è„šæœ¬çš„é¡ºåºå¯åŠ¨

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›é¡¹ç›®ã€‚åœ¨æäº¤ä»£ç å‰ï¼Œè¯·ç¡®ä¿ï¼š
1. ä»£ç ç¬¦åˆé¡¹ç›®çš„ç¼–ç è§„èŒƒ
2. æ·»åŠ å¿…è¦çš„æµ‹è¯•ç”¨ä¾‹
3. æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨å¼€æºè®¸å¯è¯ï¼Œå…·ä½“ä¿¡æ¯è¯·æŸ¥çœ‹LICENSEæ–‡ä»¶ã€‚
        
